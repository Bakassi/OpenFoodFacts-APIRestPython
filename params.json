{"name":"Openfoodfacts-apirestpython","tagline":"API for Open Food Facts","body":"# Open Food Facts API Rest Python #\r\n\r\nOFF API provides programmatic access to Open Food Facts functionality and content.<br/>\r\n\r\nTo try the API : https://offapi.herokuapp.com/ <br/>\r\nOr if you want to try in localhost, see below.\r\n\r\nThe API is [REST API](http://en.wikipedia.org/wiki/Representational_State_Transfer \"RESTful\").\r\nCurrently, return format for all endpoints is [JSON](http://json.org/ \"JSON\").\r\n\r\n## What is this repository for? \r\n\r\nThis piece of software’s main goals are :\r\n* To make it easy to retrieve data using HTTP requests\r\n* To provide filters in the API\r\n* To provide custom filters\r\n\r\n\r\n## Setup for localhost\r\n\r\n* Install python 3\r\n* Install mongodb\r\n* Install pip\r\n* Install requirements : `$ pip install -r requirements.txt`\r\n* Download the database from : http://world.openfoodfacts.org/data/openfoodfacts-mongodbdump.tar.gz\r\n* Import to local mongodb : `$ mongorestore -d off -c products /foldertobsonfile/products.bson`\r\n* Launch api : `$ python3 runApiRESTServer.py`\r\n* That's all !\r\n\r\n## Documentation\r\n### How to use it?\r\n\r\nSimple filter : `/products?origins=United Kingdom` <br/>\r\nComplex filter : `/products?nutrition_grade_fr=a&origins=United Kingdom` <br/>\r\nFor arrays, a “.” will be used as a separator like so : `/products?nutrient_levels.salt=low`\r\nSearchs can be inexact like :`/products?ingredients_text=beef`<br/>\r\nIt will retrieve tags like “beef braising steak”, “beef steak”...\r\n\r\n/!\\ By default the objects will be sorted by `created_t` in order to have the most important objects first\r\n\r\nURL to query                   | Description\r\n------------------------------ | ---------------------------\r\n<code>GET</code> `/product/<barcode>`           | Get a product by barcode eg. `/product/737628064502`\r\n<code>GET</code> `/products/brands`             | If you want to know how many brands there are in the list you have just to do a request like that : `/products/brands?count=1`. If you want to query brands, to do for example an autocomplete field in ajax, query the API like : `/products/brands?query=Auch` or `/products/brands?query=Sains`.\r\n<code>GET</code> `/products/categories`         | If you want to know how many categories there are in the list you have just to do a request like that : `/products/categories?count=1`. If you want to query categories, to do for example an autocomplete field in ajax, query the API like : `/products/categories?query=Ric` or `/products/categories?query=plant`.\r\n<code>GET</code> `/products/countries`          | If you want to know how many countries there are in the list you have just to do a request like that : `/products/countries?count=1`. If you want to query countries, to do for example an autocomplete field in ajax, query the API like : `/products/countries?query=Fra` or `/products/countries?query=Aus`.\r\n<code>GET</code> `/products/additives`          | If you want to know how many additives there are in the list you have just to do a request like that : `/products/additives?count=1`. If you want to query additives, to do for example an autocomplete field in ajax, query the API like : `/products/additives?query=Citric` or `/products/additives?query=acid`.\r\n<code>GET</code> `/products/allergens`          | If you want to know how many allergens there are in the list you have just to do a request like that : `/products/allergens?count=1`. If you want to query allergens, to do for example an autocomplete field in ajax, query the API like : `/products/allergens?query=milk` or `/products/allergens?query=oil`. \r\n\r\n### Options\r\n\r\nField         | Value by default | Value type\r\n------------- | ---------------- | ---------\r\nlimit=        | 50               | limit the number of products returned\r\nskip=         | 0                | skips the specified number of products returned\r\ncount=        | 0                | if 1 then returns the number of rows\r\nshort=        | 0                | Filters rows retrieved, make it faster for lists for example, if 1 columns projection on `code`, `lang` and `product_name`\r\nq    =        | none             | search text on indexed fields\r\n\r\n### Indexed fields\r\n\r\nSome fields are described here : http://world.openfoodfacts.org/data/data-fields.txt \r\n\r\n### Example\r\n**Request**\r\n\r\n    GET /product/737628064502\r\n\r\n**Return**\r\n``` json\r\n{\r\n   \"status_verbose\":\"product found\",\r\n   \"status\":1,\r\n   \"product\":{\r\n      \"last_edit_dates_tags\":[\r\n         \"2012-12-11\",\r\n         \"2012-12\",\r\n         \"2012\"\r\n      ],\r\n      \"labels_hierarchy\":[\r\n         \"en:gluten-free\"\r\n      ],\r\n      \"_id\":\"737628064502\",\r\n      \"categories_hierarchy\":[\r\n         \"en:Rice Noodles\"\r\n      ],\r\n      \"pnns_groups_1\":\"unknown\",\r\n      \"states_tags\":[\r\n         \"en:to-be-checked\",\r\n         \"en:complete\",\r\n         \"en:nutrition-facts-completed\",\r\n         \"en:ingredients-completed\",\r\n         \"en:expiration-date-to-be-completed\",\r\n         \"en:characteristics-completed\",\r\n         \"en:photos-validated\",\r\n         \"en:photos-uploaded\"\r\n      ],\r\n      \"checkers_tags\":[\r\n\r\n      ],\r\n      \"labels_tags\":[\r\n         \"en:gluten-free\"\r\n      ],\r\n      \"image_small_url\":\"http://world.openfoodfacts.org/images/products/737/628/064/502/front.6.200.jpg\",\r\n      \"code\":\"737628064502\",\r\n      \"additives_tags_n\":null,\r\n      \"traces_tags\":[\r\n         \"peanuts\"\r\n      ],\r\n      \"lang\":\"en\",\r\n      \"photographers\":[\r\n         \"andre\"\r\n      ],\r\n      \"generic_name\":\"Rice Noodles\",\r\n      \"ingredients_that_may_be_from_palm_oil_tags\":[\r\n\r\n      ],\r\n      \"old_additives_tags\":[\r\n         \"en:e330\"\r\n      ],\r\n      \"_keywords\":[\r\n         \"thailand\",\r\n         \"stir-fry\",\r\n         \"kitchen\",\r\n         \"thai\",\r\n         \"free\",\r\n         \"gluten\",\r\n         \"rice\",\r\n         \"noodle\"\r\n      ],\r\n      \"rev\":15,\r\n      \"editors\":[\r\n         \"\",\r\n         \"thierrym\",\r\n         \"manu1400\",\r\n         \"andre\"\r\n      ],\r\n      \"interface_version_created\":\"20120622\",\r\n      \"emb_codes\":\"\",\r\n      \"max_imgid\":\"5\",\r\n      \"additives_tags\":[\r\n         \"en:e330\"\r\n      ],\r\n      \"emb_codes_orig\":\"\",\r\n      \"informers_tags\":[\r\n         \"andre\",\r\n         \"manu1400\",\r\n         \"thierrym\"\r\n      ],\r\n      \"nutrient_levels_tags\":[\r\n         \"脂肪-in-moderate-quantity\",\r\n         \"饱和脂肪-in-low-quantity\",\r\n         \"糖-in-high-quantity\",\r\n         \"食盐-in-high-quantity\"\r\n      ],\r\n      \"photographers_tags\":[\r\n         \"andre\"\r\n      ],\r\n      \"additives_n\":1,\r\n      \"pnns_groups_2_tags\":[\r\n         \"unknown\"\r\n      ],\r\n      \"unknown_nutrients_tags\":[\r\n\r\n      ],\r\n      \"packaging_tags\":[\r\n         \"cellophane\",\r\n         \"carton\"\r\n      ],\r\n      \"nutriments\":{\r\n         \"sodium\":\"0.629\",\r\n         \"sugars\":10,\r\n         \"carbohydrates_unit\":\"g\",\r\n         \"fat_unit\":\"g\",\r\n         \"proteins_unit\":\"g\",\r\n         \"nutrition-score-fr_100g\":15,\r\n         \"fat\":7,\r\n         \"proteins_serving\":7,\r\n         \"sodium_serving\":0.629,\r\n         \"salt\":1.59766,\r\n         \"proteins\":7,\r\n         \"nutrition-score-fr\":15,\r\n         \"sugars_unit\":\"g\",\r\n         \"fat_serving\":7,\r\n         \"sodium_unit\":\"mg\",\r\n         \"sugars_100g\":\"12.8\",\r\n         \"saturated-fat_unit\":\"g\",\r\n         \"sodium_100g\":0.806,\r\n         \"saturated-fat_serving\":1,\r\n         \"fiber_unit\":\"g\",\r\n         \"energy\":1297,\r\n         \"energy_unit\":\"kcal\",\r\n         \"sugars_serving\":10,\r\n         \"carbohydrates_100g\":70.5,\r\n         \"nutrition-score-uk\":15,\r\n         \"proteins_100g\":8.97,\r\n         \"fiber_serving\":0,\r\n         \"carbohydrates_serving\":55,\r\n         \"energy_serving\":1297,\r\n         \"fat_100g\":\"8.97\",\r\n         \"saturated-fat_100g\":\"1.28\",\r\n         \"nutrition-score-uk_100g\":15,\r\n         \"fiber\":0,\r\n         \"salt_serving\":1.59766,\r\n         \"salt_100g\":\"2.05\",\r\n         \"carbohydrates\":55,\r\n         \"fiber_100g\":0,\r\n         \"energy_100g\":1660,\r\n         \"saturated-fat\":1\r\n      },\r\n      \"countries_tags\":[\r\n         \"en:france\"\r\n      ],\r\n      \"ingredients_from_palm_oil_tags\":[\r\n\r\n      ],\r\n      \"emb_codes_tags\":[\r\n\r\n      ],\r\n      \"brands_tags\":[\r\n         \"thai-kitchen\"\r\n      ],\r\n      \"purchase_places\":\"\",\r\n      \"pnns_groups_2\":\"unknown\",\r\n      \"countries_hierarchy\":[\r\n         \"en:france\"\r\n      ],\r\n      \"traces\":\"Peanuts\",\r\n      \"categories\":\"Rice Noodles\",\r\n      \"ingredients_text\":\"RICE NOODLES (RICE, WATER), SEASONING PACKET (PEANUT, SUGAR, SALT, CORN STARCH, SPICES [CHILI, CINNAMON, PEPPER, CUMIN, CLOVE], HYDRDLYZED SOY PROTEIN, GREEN ONIONS, CITRIC ACID, PEANUT OIL, SESAME OIL, NATURAL FLAVOR).  \",\r\n      \"created_t\":1345799269,\r\n      \"product_name\":\"Stir-Fry Rice Noodles\",\r\n      \"ingredients_from_or_that_may_be_from_palm_oil_n\":0,\r\n      \"creator\":\"andre\",\r\n      \"no_nutrition_data\":null,\r\n      \"serving_size\":\"78 g\",\r\n      \"completed_t\":1355184837,\r\n      \"last_modified_by\":\"thierrym\",\r\n      \"new_additives_n\":1,\r\n      \"origins\":\"Thailand\",\r\n      \"stores\":\"\",\r\n      \"nutrition_grade_fr\":\"d\",\r\n      \"nutrient_levels\":{\r\n         \"salt\":\"high\",\r\n         \"fat\":\"moderate\",\r\n         \"sugars\":\"high\",\r\n         \"saturated-fat\":\"low\"\r\n      },\r\n      \"stores_tags\":[\r\n\r\n      ],\r\n      \"id\":\"737628064502\",\r\n      \"countries\":\"France\",\r\n      \"purchase_places_tags\":[\r\n\r\n      ],\r\n      \"interface_version_modified\":\"20120622\",\r\n      \"fruits-vegetables-nuts_100g_estimate\":0,\r\n      \"sortkey\":1355184837,\r\n      \"last_modified_t\":1355184837,\r\n      \"nutrition_score_debug\":\" -- energy 4 + sat-fat 1 + fr-sat-fat-for-fats 0 + sugars 2 + sodium 8 - fruits 0% 0 - fiber 0 - proteins 5 -- fsa 15 -- fr 15\",\r\n      \"countries.20131227\":null,\r\n      \"correctors_tags\":[\r\n         \"andre\",\r\n         \"thierrym\"\r\n      ],\r\n      \"correctors\":[\r\n         \"andre\",\r\n         \"thierrym\"\r\n      ],\r\n      \"new_additives_debug\":\"lc: en -  [ rice-noodles -> en:rice-noodles  ]  [ rice -> en:rice  ]  [ water -> en:water  ]  [ seasoning-packet -> en:seasoning-packet  ]  [ peanut -> en:peanut  ]  [ sugar -> en:sugar  ]  [ salt -> en:salt  ]  [ corn-starch -> en:corn-starch  ]  [ spices-chili -> en:spices-chili  ]  [ cinnamon -> en:cinnamon  ]  [ pepper -> en:pepper  ]  [ cumin -> en:cumin  ]  [ clove -> en:clove  ]  [ hydrdlyzed-soy-protein -> en:hydrdlyzed-soy-protein  ]  [ green-onions -> en:green-onions  ]  [ citric-acid -> en:e330  -> exists  ]  [ peanut-oil -> en:peanut-oil  ]  [ sesame-oil -> en:sesame-oil  ]  [ natural-flavor -> en:natural-flavor  ] \",\r\n      \"brands\":\"Thai Kitchen\",\r\n      \"ingredients_tags\":[\r\n         \"rice-noodles\",\r\n         \"seasoning-packet\",\r\n         \"\",\r\n         \"rice\",\r\n         \"water\",\r\n         \"peanut\",\r\n         \"sugar\",\r\n         \"salt\",\r\n         \"corn-starch\",\r\n         \"spices\",\r\n         \"chili\",\r\n         \"cinnamon\",\r\n         \"pepper\",\r\n         \"cumin\",\r\n         \"clove\",\r\n         \"hydrdlyzed-soy-protein\",\r\n         \"green-onions\",\r\n         \"citric-acid\",\r\n         \"peanut-oil\",\r\n         \"sesame-oil\",\r\n         \"natural-flavor\"\r\n      ],\r\n      \"new_additives_tags\":[\r\n         \"en:e330\"\r\n      ],\r\n      \"states\":\"en:to-be-checked, en:complete, en:nutrition-facts-completed, en:ingredients-completed, en:expiration-date-to-be-completed, en:characteristics-completed, en:photos-validated, en:photos-uploaded\",\r\n      \"informers\":[\r\n         \"andre\",\r\n         \"manu1400\",\r\n         \"thierrym\"\r\n      ],\r\n      \"entry_dates_tags\":[\r\n         \"2012-08-24\",\r\n         \"2012-08\",\r\n         \"2012\"\r\n      ],\r\n      \"nutrition_grades_tags\":[\r\n         \"d\"\r\n      ],\r\n      \"packaging\":\"Cellophane,Carton\",\r\n      \"serving_quantity\":78,\r\n      \"origins_tags\":[\r\n         \"thailand\"\r\n      ],\r\n      \"nutrition_data_per\":\"serving\",\r\n      \"labels\":\"gluten free\",\r\n      \"cities_tags\":[\r\n\r\n      ],\r\n      \"emb_codes_20141016\":\"\",\r\n      \"categories_tags\":[\r\n         \"en:rice-noodles\"\r\n      ],\r\n      \"quantity\":\"155 g\",\r\n      \"expiration_date\":\"\",\r\n      \"states_hierarchy\":[\r\n         \"en:to-be-checked\",\r\n         \"en:complete\",\r\n         \"en:nutrition-facts-completed\",\r\n         \"en:ingredients-completed\",\r\n         \"en:expiration-date-to-be-completed\",\r\n         \"en:characteristics-completed\",\r\n         \"en:photos-validated\",\r\n         \"en:photos-uploaded\"\r\n      ],\r\n      \"ingredients_that_may_be_from_palm_oil_n\":0,\r\n      \"ingredients_from_palm_oil_n\":0,\r\n      \"image_url\":\"http://world.openfoodfacts.org/images/products/737/628/064/502/front.6.400.jpg\",\r\n      \"ingredients\":[\r\n         {\r\n            \"text\":\"RICE NOODLES\",\r\n            \"id\":\"rice-noodles\",\r\n            \"rank\":1\r\n         },\r\n         {\r\n            \"text\":\"SEASONING PACKET\",\r\n            \"id\":\"seasoning-packet\",\r\n            \"rank\":2\r\n         },\r\n         {\r\n            \"text\":\".\",\r\n            \"id\":\"\",\r\n            \"rank\":3\r\n         },\r\n         {\r\n            \"text\":\"RICE\",\r\n            \"id\":\"rice\"\r\n         },\r\n         {\r\n            \"text\":\"WATER\",\r\n            \"id\":\"water\"\r\n         },\r\n         {\r\n            \"text\":\"PEANUT\",\r\n            \"id\":\"peanut\"\r\n         },\r\n         {\r\n            \"text\":\"SUGAR\",\r\n            \"id\":\"sugar\"\r\n         },\r\n         {\r\n            \"text\":\"SALT\",\r\n            \"id\":\"salt\"\r\n         },\r\n         {\r\n            \"text\":\"CORN STARCH\",\r\n            \"id\":\"corn-starch\"\r\n         },\r\n         {\r\n            \"text\":\"SPICES\",\r\n            \"id\":\"spices\"\r\n         },\r\n         {\r\n            \"text\":\"CHILI\",\r\n            \"id\":\"chili\"\r\n         },\r\n         {\r\n            \"text\":\"CINNAMON\",\r\n            \"id\":\"cinnamon\"\r\n         },\r\n         {\r\n            \"text\":\"PEPPER\",\r\n            \"id\":\"pepper\"\r\n         },\r\n         {\r\n            \"text\":\"CUMIN\",\r\n            \"id\":\"cumin\"\r\n         },\r\n         {\r\n            \"text\":\"CLOVE\",\r\n            \"id\":\"clove\"\r\n         },\r\n         {\r\n            \"text\":\"HYDRDLYZED SOY PROTEIN\",\r\n            \"id\":\"hydrdlyzed-soy-protein\"\r\n         },\r\n         {\r\n            \"text\":\"GREEN ONIONS\",\r\n            \"id\":\"green-onions\"\r\n         },\r\n         {\r\n            \"text\":\"CITRIC ACID\",\r\n            \"id\":\"citric-acid\"\r\n         },\r\n         {\r\n            \"text\":\"PEANUT OIL\",\r\n            \"id\":\"peanut-oil\"\r\n         },\r\n         {\r\n            \"text\":\"SESAME OIL\",\r\n            \"id\":\"sesame-oil\"\r\n         },\r\n         {\r\n            \"text\":\"NATURAL FLAVOR\",\r\n            \"id\":\"natural-flavor\"\r\n         }\r\n      ],\r\n      \"lc\":\"en\",\r\n      \"pnns_groups_1_tags\":[\r\n         \"unknown\"\r\n      ],\r\n      \"checkers\":[\r\n\r\n      ],\r\n      \"complete\":1\r\n   },\r\n   \"code\":\"737628064502\"\r\n}\r\n```\r\n\r\n## Creators\r\n\r\n**Scot Scriven**\r\n- <https://github.com/itchix>\r\n\r\n## Copyright and license\r\n\r\n    Copyright 2015 Scriven Scot\r\n    \r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n    \r\n        http://www.apache.org/licenses/LICENSE-2.0\r\n    \r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}